{% extends "base.html" %}

{% block title %} Recipe Details {% endblock %}

{% block jQueryPlugin %}
<script type="text/javascript" src="/static/js/d3.v5.min.js"></script>
<script type="text/javascript" src="/static/js/d3-tip.min.js"></script>
<script type="text/javascript" src="/static/js/d3-recipe-graphs.js"></script>
{% endblock %}

{% block navbarContent %}
<ul class="menu-area-main">
    <li>
        <a>User ID: {{ user_id }}</a>
    <li>
    <li class="active">
        <a href="{{ url_for('main.initial_search', user_id=user_id, db_connected=db_connected) }}">Home</a>
    </li>
    <li class="active">
        <a href="{{ url_for('visualSearch.recipe_info', user_id=user_id, recipe=recipe, main_ingredients=main_ingredients, side_ingredients=side_ingredients) }}">Back</a>
    </li>
    <li>
        <a href="{{ url_for('auth.logout') }}">
            <img class="logout_btn" src="/static/icon/logout.png" alt="logout"/>
        </a>
    </li>
</ul>
{% endblock %}

{% block bodyContent %}
<br><br><br>
<div id="recipeDetails" style="padding-left: 10%; padding-right: 10%">
    <table id="recipeTable">
        <tr>
            <th colspan="2" id="th_recipe_name" style="text-align: center"></th>
        </tr>
        <tr>
            <th>Steps:</th>
            <td id="td_steps"></td>
        </tr>
        <!--    <tr>-->
        <!--        <th>Calorie Level:</th>-->
        <!--        <td id="td_calorieLevel"></td>-->
        <!--    </tr>-->
        <tr>
            <th>Number of Ingredients:</th>
            <td id="td_numberOfIngredients"></td>
        </tr>
        <tr>
            <th>Ingredients:</th>
            <td id="td_ingredients"></td>
        </tr>
        <tr>
            <th>Nutrition Details:</th>
            <td id="td_nutritionDetials"></td>
        </tr>
        <tr>
            <th>Tags:</th>
            <td id="td_tags"></td>
        </tr>
        <tr>
            <th>Average Rating:</th>
            <td id="td_avgRating"></td>
        </tr>
        <tr>
            <th>Number of Ratings:</th>
            <td id="td_numberOfRatings"></td>
        </tr>
        <tr>
            <th>Alternative Ingredients:</th>
            <td id="td_altIngredients"></td>
        </tr>
    </table>
</div>

<script>
    var recipeData = {{ result.data | safe }},
        recipe_info = {{ recipe | tojson }}.split('&'),
        recipe_name = decodeURI(recipe_info[1]);

    document.getElementById("th_recipe_name").innerHTML = "Recipe: " + recipe_name;

    for (const key in recipeData[0] ) {
        if (`${key}` !== "calorieLevel") {
            var td_id = "td_" + `${key}`,
            td_ele =  document.getElementById(td_id);

            td_ele.innerHTML = `${recipeData[0][key]}`;
        }
    }
</script>
{% endblock %}