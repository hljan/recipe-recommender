{% extends "base.html" %}
{% block title %} Text Search {% endblock %}

{% block navbarContent %}
    <ul class="menu-area-main">
        <li>User ID: {{ user_id }}</li>
        <li class="active">
            <a href="{{ url_for('main.initial_search', user_id=user_id, db_connected=db_connected) }}">Home</a>
        </li>
        <li>
            <a href="{{ url_for('auth.logout') }}">
                <img class="logout_btn" src="/static/icon/logout.png" alt="logout"/>
            </a>
        </li>
    </ul>
{% endblock %}

{% block bodyContent %}
    <div style="padding-left: 5%; padding-right: 5%">

    <div class="navi">
        <div class="navi-item1">
            <button onclick="toggle_div(event, 'matching_recipe')" class="nav-button" id="matching_recipe_btn">
                <div class="navi-icon"><i class="fas fa-seedling"></i></div>
                <div class="navi-text">Matching Recipes</div>
            </button>
        </div>
        <div class="navi-item2">
            <button onclick="toggle_div(event, 'content_based')" class="nav-button" id="content_based_btn">
                <div class="navi-icon"><i class="fas fa-pizza-slice"></i></div>
                <div class="navi-text">Filtered By My Review History</div>
            </button>
        </div>
        <div class="navi-item3">
            <button onclick="toggle_div(event, 'collab_filter')" class="nav-button" id="collab_filter_btn">
                <div class="navi-icon"><i class="fas fa-ice-cream"></i></div>
                <div class="navi-text">Filtered By Similar User's Reviews</div>
            </button>
        </div>
    </div>
    </div>

    <div style="padding-left: 10%; padding-right: 10%">
        <div style="display: block" class="menu" id="matching_recipe">
        {% for recipe in matching_recipes %}
            {% set recipe2=recipe.recipeID|string + "&" + recipe.recipeName %}
            <a href="{{ url_for('main.recipe_details', recipe=recipe2, recipe_id=recipe.recipeID, user_id=user_id) }}">
                <div class="menu-item">
                    <div class="menu-item-name">{{ recipe.recipeName }}</div>
                </div>
            </a>
        {% endfor %}
    </div>

    <div class="menu" id="content_based">
        {% for recipe in content_based %}
            {% set recipe2=recipe.recipeID|string + "&" + recipe.recipeName %}
            <a href="{{ url_for('main.recipe_details', recipe=recipe2, recipe_id=recipe.recipeID, user_id=user_id) }}">
                <div class="menu-item">
                    <div class="menu-item-name">{{ recipe.recipeName }}</div>
                </div>
            </a>
        {% endfor %}
    </div>

    <div class="menu" id="collab_filter">
        {% for recipe in collab_filter %}
            {% set recipe2=recipe.recipeID|string + "&" + recipe.recipeName %}
            <a href="{{ url_for('main.recipe_details', recipe=recipe2, recipe_id=recipe.recipeID, user_id=user_id) }}">
                <div class="menu-item">
                    <div class="menu-item-name">{{ recipe.recipeName }}</div>
                </div>
            </a>
        {% endfor %}
    </div>
    </div>

    <script>
        function toggle_div(evt, div_name) {
            var div_content = document.getElementsByClassName("menu");
            for (i = 0; i < div_content.length; i++) {
                div_content[i].style.display = "none";
            }

            document.getElementById(div_name).style.display = "block";
            evt.currentTarget.className += " active";
        }
    </script>

{% endblock %}
